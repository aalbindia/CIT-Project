
{% extends "base_navbar.html" %}

{% block content %}

<link rel="stylesheet" href="{{ url_for('static', filename='css/car.css') }}">

<h4>Sort by:</h4> 
<a href="/cars?sort=rate&order=desc" class="btn btn-outline-primary">Rate</a>  
<a href="/cars?sort=type&order=desc" class="btn btn-outline-primary">Type</a> 
<a href="/cars?sort=location&order=desc" class="btn btn-outline-primary">Location</a> 

<a href="/cars?sort={{ sort_by }}&order={% if order == 'asc' %}desc{% else %}asc{% endif %}" 
   class="btn btn-outline-primary">
    {{ 'Ascending' if order == 'asc' else 'Descending' }}
</a>

<table class="table table-striped table-hover table-sm">
    <thead>
      <tr>
        <th scope="col">#</th>
        <th scope="col">Model</th>
        <th scope="col">Year</th>
        <th scope="col">Brand</th>
        <th scope="col">Type</th>
        <th scope="col">Color</th>
        <th scope="col">Rate</th>
        <th scope="col">Campus</th>
        <th scope="col">Mileage</th>
        <th scope="col">Available?</th>
        <th scope="col">Action</th>
      </tr>
    </thead>
    <tbody>
        {% for element in my_list %}
            <tr>
                <th scope="row">{{ loop.index }}</th>
                <td>{{ element.model }}</td>
                <td>{{ element.year }}</td>
                <td>{{ element.brand.name }}</td>
                <td>{{ element.carType.name }}</td>
                <td>{{ element.color }}</td>
                <td>${{ "%.2f"|format(element.rate) }}</td>
                <td>{{ element.campus.name }}</td>
                <td>{{ element.milage }}</td>
                {% if element.rental %}
                    <td>❌</td>
                {% else %}
                    <td>✅</td>
                {% endif %}
                <td>
                    <a href="{{ url_for('car_details', id=element.id) }}" class="btn btn-success btn-sm">
                        View
                    </a>
                </td>
            </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}